***************
*** 23,30 ****
    /**
     * {@inheritdoc}
     */
-   public function preRender(&$element, $rendering_object) {
-     parent::preRender($element, $rendering_object);
  
      $element += [
        '#type' => 'details',
--- 23,29 ----
    /**
     * {@inheritdoc}
     */
+   public function process(&$element, $processed_object) {
  
      $element += [
        '#type' => 'details',
***************
*** 53,58 ****
        $element['#attached']['library'][] = 'field_group/formatter.details';
        $element['#attached']['library'][] = 'field_group/core';
      }
    }
  
    /**
--- 52,66 ----
        $element['#attached']['library'][] = 'field_group/formatter.details';
        $element['#attached']['library'][] = 'field_group/core';
      }
+ 
+   }
+ 
+   /**
+    * {@inheritdoc}
+    */
+   public function preRender(&$element, $rendering_object) {
+     parent::preRender($element, $rendering_object);
+     $this->process($element, $rendering_object);
    }
  
    /**
