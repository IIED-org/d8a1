***************
*** 26,33 ****
    /**
     * {@inheritdoc}
     */
-   public function preRender(&$element, $rendering_object) {
-     parent::preRender($element, $rendering_object);
  
      $element_attributes = new Attribute();
  
--- 26,35 ----
    /**
     * {@inheritdoc}
     */
+   public function process(&$element, $processed_object) {
+ 
+     // Keep using preRender parent for BC.
+     parent::preRender($element, $processed_object);
  
      $element_attributes = new Attribute();
  
***************
*** 72,80 ****
        $element['#title'] = Html::escape($this->t($this->getLabel()));
      }
  
-     $form_state = new FormState();
-     \Drupal\field_group\Element\HtmlElement::processHtmlElement($element, $form_state);
- 
      if ($this->getSetting('required_fields')) {
        $element['#attributes']['class'][] = 'field-group-html-element';
        $element['#attached']['library'][] = 'field_group/formatter.html_element';
--- 74,79 ----
        $element['#title'] = Html::escape($this->t($this->getLabel()));
      }
  
      if ($this->getSetting('required_fields')) {
        $element['#attributes']['class'][] = 'field-group-html-element';
        $element['#attached']['library'][] = 'field_group/formatter.html_element';
***************
*** 82,87 ****
      }
    }
  
    /**
     * {@inheritdoc}
     */
--- 81,96 ----
      }
    }
  
+   /**
+    * {@inheritdoc}
+    */
+   public function preRender(&$element, $rendering_object) {
+     $this->process($element, $rendering_object);
+ 
+     $form_state = new FormState();
+     \Drupal\field_group\Element\HtmlElement::processHtmlElement($element, $form_state);
+   }
+ 
    /**
     * {@inheritdoc}
     */
